(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2147ded5"],{"6e91":function(s,r,a){"use strict";var e=a("c645"),t=a.n(e);t.a},c645:function(s,r,a){},c66d:function(s,r,a){"use strict";a.r(r);var e=function(){var s=this,r=s.$createElement,a=s._self._c||r;return a("div",{staticClass:"profile-container"},[a("div",{staticClass:"profile-wrapper"},[a("div",{staticClass:"profile-grid"},[a("div",{staticClass:"profile-module"},[a("transition",{attrs:{name:"appear"}},[""!=s.uploadErrorMessage?a("div",{staticClass:"error-flash"},[a("div",{staticClass:"close",on:{click:function(r){s.uploadErrorMessage=""}}},[a("div"),a("div")]),s._v(" "+s._s(s.uploadErrorMessage)+" ")]):s._e()]),a("div",{staticClass:"user-details"},[a("div",{staticClass:"picture-container"},[a("div",{staticClass:"profile-picture"},[a("img",{attrs:{src:"/api/posts/profile/pic/"+s.getProfilePic,alt:""}}),a("div",{staticClass:"change-pic",on:{click:function(r){return s.$refs.file.click()}}},[a("svg",{attrs:{height:"512",viewBox:"0 0 512 512",width:"512",xmlns:"http://www.w3.org/2000/svg"}},[a("g",{attrs:{id:"Solid"}},[a("path",{attrs:{d:"m182.461 155.48 49.539-49.539v262.059a24 24 0 0 0 48 0v-262.059l49.539 49.539a24 24 0 1 0 33.941-33.941l-90.509-90.51a24 24 0 0 0 -33.942 0l-90.509 90.51a24 24 0 1 0 33.941 33.941z"}}),a("path",{attrs:{d:"m464 232a24 24 0 0 0 -24 24v184h-368v-184a24 24 0 0 0 -48 0v192a40 40 0 0 0 40 40h384a40 40 0 0 0 40-40v-192a24 24 0 0 0 -24-24z"}})])]),s._v(" Change photo "),a("input",{ref:"file",attrs:{type:"file"},on:{change:function(r){return s.handlePicUpload(r)}}})])])]),a("div",{staticClass:"profile-username"},[a("div",[s._v(" @"+s._s(s.getUsername)+" "),a("div",{staticClass:"edit-username"},[a("svg",{attrs:{viewBox:"0 0 383.947 383.947","xml:space":"preserve"}},[a("g",[a("g",[a("g",[a("polygon",{attrs:{points:"0,303.947 0,383.947 80,383.947 316.053,147.893 236.053,67.893 \t\t\t"}}),a("path",{attrs:{d:"M377.707,56.053L327.893,6.24c-8.32-8.32-21.867-8.32-30.187,0l-39.04,39.04l80,80l39.04-39.04\n                                          C386.027,77.92,386.027,64.373,377.707,56.053z"}})])])])])])])]),s._m(0)]),a("div",{staticClass:"password-change"})],1),a("div",{staticClass:"change-info--container"},[a("div",{staticClass:"change-password--container"},[a("div",{staticClass:"module-title"},[s._v(" Change Password: ")]),a("div",{staticClass:"password-form"},[a("input",{directives:[{name:"model",rawName:"v-model.lazy",value:s.$v.password.currentPassword.$model,expression:"$v.password.currentPassword.$model",modifiers:{lazy:!0}}],attrs:{type:"password",placeholder:"Current Password"},domProps:{value:s.$v.password.currentPassword.$model},on:{blur:function(r){return s.$v.password.currentPassword.$touch()},change:function(r){return s.$set(s.$v.password.currentPassword,"$model",r.target.value)}}}),a("transition",{attrs:{name:"fade"}},[s.$v.password.currentPassword.$dirty&&!s.$v.password.currentPassword.required?a("div",{staticClass:"error"},[s._v("Field is required")]):s.backendError["currentPass"]?a("div",{staticClass:"error"},[s._v(" "+s._s(s.backendError["currentPass"])+" ")]):s._e()]),a("input",{directives:[{name:"model",rawName:"v-model.lazy",value:s.$v.password.newPassword.$model,expression:"$v.password.newPassword.$model",modifiers:{lazy:!0}}],attrs:{type:"password",placeholder:"New Password"},domProps:{value:s.$v.password.newPassword.$model},on:{blur:function(r){return s.$v.password.newPassword.$touch()},change:function(r){return s.$set(s.$v.password.newPassword,"$model",r.target.value)}}}),a("transition",{attrs:{name:"fade"}},[s.$v.password.newPassword.$dirty&&!s.$v.password.newPassword.required?a("div",{staticClass:"error"},[s._v("Field is required")]):s.$v.password.newPassword.$dirty&&!s.$v.password.newPassword.strongPassword?a("div",{staticClass:"error"},[s._v("Strong passwords need to have a letter, a number, a special character, and be atleast 8 characters long.")]):s.$v.password.newPassword.$dirty&&!s.$v.password.newPassword.maxLength?a("div",{staticClass:"error"},[s._v(" Your new password should not exceed "+s._s(s.$v.password.newPassword.$params.maxLength.max)+" characters ")]):s.backendError["newPassword"]?a("div",{staticClass:"error"},[s._v(" "+s._s(s.backendError["newPassword"])+" ")]):s._e()]),a("input",{directives:[{name:"model",rawName:"v-model.lazy",value:s.$v.password.newPasswordConfirm.$model,expression:"$v.password.newPasswordConfirm.$model",modifiers:{lazy:!0}}],attrs:{type:"password",placeholder:"Confirm Password"},domProps:{value:s.$v.password.newPasswordConfirm.$model},on:{blur:function(r){return s.$v.password.newPasswordConfirm.$touch()},change:function(r){return s.$set(s.$v.password.newPasswordConfirm,"$model",r.target.value)}}}),a("transition",{attrs:{name:"fade"}},[s.$v.password.newPasswordConfirm.$dirty&&!s.$v.password.newPasswordConfirm.required?a("div",{staticClass:"error"},[s._v("Field is required")]):s.$v.password.newPasswordConfirm.$dirty&&!s.$v.password.newPasswordConfirm.sameAsPassword?a("div",{staticClass:"error"},[s._v("The passwords do not match.")]):s.backendError["newPasswordConfirm"]?a("div",{staticClass:"error"},[s._v(" "+s._s(s.backendError["newPasswordConfirm"])+" ")]):s._e()])],1),a("div",{staticClass:"btn",on:{click:s.changePassword}},[s._v(s._s(s.btnText))]),a("transition",{attrs:{name:"success"}},[s.successMessage?a("div",{staticClass:"success-flash"},[a("strong",[s._v("Success: ")]),s._v(" "+s._s(s.successMessage)+" ")]):s._e()])],1)]),a("div",{staticClass:"drawing-list--container"},[a("div",{staticClass:"module-title"},[a("div",[s._v("Drawings:")]),a("div",[s._v(s._s(s.drawingPosts.length)+"/15")])]),a("div",{staticClass:"drawing-post--container"},s._l(s.drawingPosts,(function(r,e){return a("div",{key:e,staticClass:"drawing-post"},[a("div",{staticClass:"drawing-thumbnail"},[a("img",{attrs:{src:"/api/posts/profile/drawing/"+r.drawing_path,alt:""}})]),a("div",{staticClass:"drawing-info--container"},[a("div",{staticClass:"drawing-title"},[s._v(" Title: "+s._s(r.title)+" ")]),a("div",{staticClass:"drawing-description"},[s._v(" Description: "+s._s(r.description)+" ")])])])})),0)])])])])},t=[function(){var s=this,r=s.$createElement,a=s._self._c||r;return a("div",{staticClass:"post-info"},[a("div",{staticClass:"drawing-count"},[s._v("Drawings:")]),a("div",{staticClass:"like-count"},[s._v("Likes:")])])}],o=a("5530"),i=a("bc3a"),n=a.n(i),d=a("b5ae"),c=a("2f62"),w={name:"Profile",data:function(){return{user:{username:"",email:""},picFile:null,uploadErrorMessage:"",backendError:"",btnText:"Change Password",successMessage:"",password:{currentPassword:"",newPassword:"",newPasswordConfirm:""},drawingPosts:[],drawingError:""}},validations:{password:{currentPassword:{required:d["required"],strongPassword:function(s){return/[a-z]/.test(s)&&/[0-9]/.test(s)&&/\W|_/.test(s)&&s.length>=8},maxLength:Object(d["maxLength"])(100)},newPassword:{required:d["required"],strongPassword:function(s){return/[a-z]/.test(s)&&/[0-9]/.test(s)&&/\W|_/.test(s)&&s.length>=8},maxLength:Object(d["maxLength"])(100)},newPasswordConfirm:{required:d["required"],sameAsPassword:Object(d["sameAs"])("newPassword")}}},computed:Object(o["a"])({},Object(c["b"])(["getLoginState","getProfilePic","getUsername"])),methods:{handlePicUpload:function(s){this.picFile=s.target.files[0]},submitFile:function(){var s=this,r=new FormData;r.append("file",this.picFile),n.a.post("/api/upload/profile-pic",r,{headers:{"Content-Type":"multipart/form-data"}}).then((function(r){s.$store.commit("SET_PROFILE_PIC",r.data)})).catch((function(r){s.uploadErrorMessage=r.response.data.error}))},changePassword:function(){var s=this;if(this.$v.password.$touch(),!this.$v.password.$invalid){this.loading=!0,this.btnText="Loading...";var r=this.password.currentPassword,a=this.password.newPassword,e=this.password.newPasswordConfirm;n.a.post("/api/auth/change-password",{currentPassword:r,newPassword:a,confirmNewPassword:e},{}).then((function(r){r.data&&(s.loading=!1,s.btnText="Change Password",s.successMessage=r.data.successPassword)})).catch((function(r){s.loading=!1,s.btnText="Change Password",s.backendError=r.response.data}))}},getDrawings:function(){var s=this;n.a.get("/api/profile/drawings").then((function(r){s.drawingPosts=r.data.drawingPosts})).catch((function(r){s.drawingError=r.response.error}))}},mounted:function(){this.getDrawings()},watch:{picFile:function(){this.submitFile()},uploadErrorMessage:function(){var s=this;""!=this.uploadErrorMessage&&setTimeout((function(){return s.uploadErrorMessage=""}),3e3)},successMessage:function(){var s=this;""!=this.successMessage&&setTimeout((function(){return s.successMessage=""}),2e3)}}},l=w,u=(a("6e91"),a("2877")),p=Object(u["a"])(l,e,t,!1,null,"8b0af926",null);r["default"]=p.exports}}]);
//# sourceMappingURL=chunk-2147ded5.99d9a3b8.js.map