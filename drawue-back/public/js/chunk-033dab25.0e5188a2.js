(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-033dab25"],{"17b6":function(s,e,r){"use strict";var a=r("a225"),t=r.n(a);t.a},2909:function(s,e,r){"use strict";r.d(e,"a",(function(){return d}));var a=r("6b75");function t(s){if(Array.isArray(s))return Object(a["a"])(s)}r("a4d3"),r("e01a"),r("d28b"),r("a630"),r("d3b7"),r("3ca3"),r("ddb0");function n(s){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(s))return Array.from(s)}var i=r("06c5");function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(s){return t(s)||n(s)||Object(i["a"])(s)||o()}},"4d63":function(s,e,r){var a=r("83ab"),t=r("da84"),n=r("94ca"),i=r("7156"),o=r("9bf2").f,d=r("241c").f,c=r("44e7"),l=r("ad6d"),w=r("9f7f"),u=r("6eeb"),p=r("d039"),v=r("69f3").set,f=r("2626"),g=r("b622"),m=g("match"),h=t.RegExp,P=h.prototype,C=/a/g,$=/a/g,b=new h(C)!==C,_=w.UNSUPPORTED_Y,y=a&&n("RegExp",!b||_||p((function(){return $[m]=!1,h(C)!=C||h($)==$||"/a/i"!=h(C,"i")})));if(y){var k=function(s,e){var r,a=this instanceof k,t=c(s),n=void 0===e;if(!a&&t&&s.constructor===k&&n)return s;b?t&&!n&&(s=s.source):s instanceof k&&(n&&(e=l.call(s)),s=s.source),_&&(r=!!e&&e.indexOf("y")>-1,r&&(e=e.replace(/y/g,"")));var o=i(b?new h(s,e):h(s,e),a?this:P,k);return _&&r&&v(o,{sticky:r}),o},x=function(s){s in k||o(k,s,{configurable:!0,get:function(){return h[s]},set:function(e){h[s]=e}})},E=d(h),M=0;while(E.length>M)x(E[M++]);P.constructor=k,k.prototype=P,u(t,"RegExp",k)}f("RegExp")},a225:function(s,e,r){},c66d:function(s,e,r){"use strict";r.r(e);var a=function(){var s=this,e=s.$createElement,r=s._self._c||e;return r("div",{staticClass:"profile-container"},[r("div",{staticClass:"profile-wrapper"},[r("div",{staticClass:"profile-grid"},[r("div",{staticClass:"profile-module"},[r("transition",{attrs:{name:"appear"}},[""!=s.uploadErrorMessage?r("div",{staticClass:"error-flash"},[r("div",{staticClass:"close",on:{click:function(e){s.uploadErrorMessage=""}}},[r("div"),r("div")]),s._v(" "+s._s(s.uploadErrorMessage)+" ")]):s._e()]),r("div",{staticClass:"user-details"},[r("div",{staticClass:"picture-container"},[r("div",{staticClass:"profile-picture"},[r("img",{attrs:{src:"/api/posts/profile/pic/"+s.getProfilePic,alt:""}}),r("div",{staticClass:"change-pic",on:{click:function(e){return s.$refs.file.click()}}},[r("svg",{attrs:{height:"512",viewBox:"0 0 512 512",width:"512",xmlns:"http://www.w3.org/2000/svg"}},[r("g",{attrs:{id:"Solid"}},[r("path",{attrs:{d:"m182.461 155.48 49.539-49.539v262.059a24 24 0 0 0 48 0v-262.059l49.539 49.539a24 24 0 1 0 33.941-33.941l-90.509-90.51a24 24 0 0 0 -33.942 0l-90.509 90.51a24 24 0 1 0 33.941 33.941z"}}),r("path",{attrs:{d:"m464 232a24 24 0 0 0 -24 24v184h-368v-184a24 24 0 0 0 -48 0v192a40 40 0 0 0 40 40h384a40 40 0 0 0 40-40v-192a24 24 0 0 0 -24-24z"}})])]),s._v(" Change photo "),r("input",{ref:"file",attrs:{type:"file"},on:{change:function(e){return s.handlePicUpload(e)}}})])])]),r("div",{staticClass:"profile-username"},[r("div",[s._v(" @"),r("span",{ref:"username",attrs:{contenteditable:s.editUsername,maxlength:"22"}},[s._v(s._s(s.getUsername))]),s.editUsername?r("div",{staticClass:"edit-username checkmark",on:{click:s.saveUsername}},[s._v(" âœ“ ")]):r("div",{staticClass:"edit-username",on:{click:s.editUser}},[r("svg",{attrs:{viewBox:"0 0 383.947 383.947","xml:space":"preserve"}},[r("g",[r("g",[r("g",[r("polygon",{attrs:{points:"0,303.947 0,383.947 80,383.947 316.053,147.893 236.053,67.893 \t\t\t"}}),r("path",{attrs:{d:"M377.707,56.053L327.893,6.24c-8.32-8.32-21.867-8.32-30.187,0l-39.04,39.04l80,80l39.04-39.04\n                                                  C386.027,77.92,386.027,64.373,377.707,56.053z"}})])])])])])])]),r("div",{staticClass:"post-info"},[r("div",{staticClass:"drawing-count"},[s._v("Drawings: "+s._s(s.profileStats[1]))]),r("div",{staticClass:"like-count"},[s._v("Likes: "+s._s(s.profileStats[0]))])])]),r("div",{staticClass:"password-change"})],1),r("div",{staticClass:"change-info--container"},[r("div",{staticClass:"change-password--container"},[r("div",{staticClass:"module-title"},[s._v(" Change Password: ")]),r("div",{staticClass:"password-form"},[r("input",{directives:[{name:"model",rawName:"v-model.lazy",value:s.$v.password.currentPassword.$model,expression:"$v.password.currentPassword.$model",modifiers:{lazy:!0}}],attrs:{type:"password",placeholder:"Current Password"},domProps:{value:s.$v.password.currentPassword.$model},on:{blur:function(e){return s.$v.password.currentPassword.$touch()},change:function(e){return s.$set(s.$v.password.currentPassword,"$model",e.target.value)}}}),r("transition",{attrs:{name:"fade"}},[s.$v.password.currentPassword.$dirty&&!s.$v.password.currentPassword.required?r("div",{staticClass:"error"},[s._v("Field is required")]):s.backendError["currentPass"]?r("div",{staticClass:"error"},[s._v(" "+s._s(s.backendError["currentPass"])+" ")]):s._e()]),r("input",{directives:[{name:"model",rawName:"v-model.lazy",value:s.$v.password.newPassword.$model,expression:"$v.password.newPassword.$model",modifiers:{lazy:!0}}],attrs:{type:"password",placeholder:"New Password"},domProps:{value:s.$v.password.newPassword.$model},on:{blur:function(e){return s.$v.password.newPassword.$touch()},change:function(e){return s.$set(s.$v.password.newPassword,"$model",e.target.value)}}}),r("transition",{attrs:{name:"fade"}},[s.$v.password.newPassword.$dirty&&!s.$v.password.newPassword.required?r("div",{staticClass:"error"},[s._v("Field is required")]):s.$v.password.newPassword.$dirty&&!s.$v.password.newPassword.strongPassword?r("div",{staticClass:"error"},[s._v("Strong passwords need to have a letter, a number, a special character, and be atleast 8 characters long.")]):s.$v.password.newPassword.$dirty&&!s.$v.password.newPassword.maxLength?r("div",{staticClass:"error"},[s._v(" Your new password should not exceed "+s._s(s.$v.password.newPassword.$params.maxLength.max)+" characters ")]):s.backendError["newPassword"]?r("div",{staticClass:"error"},[s._v(" "+s._s(s.backendError["newPassword"])+" ")]):s._e()]),r("input",{directives:[{name:"model",rawName:"v-model.lazy",value:s.$v.password.newPasswordConfirm.$model,expression:"$v.password.newPasswordConfirm.$model",modifiers:{lazy:!0}}],attrs:{type:"password",placeholder:"Confirm Password"},domProps:{value:s.$v.password.newPasswordConfirm.$model},on:{blur:function(e){return s.$v.password.newPasswordConfirm.$touch()},change:function(e){return s.$set(s.$v.password.newPasswordConfirm,"$model",e.target.value)}}}),r("transition",{attrs:{name:"fade"}},[s.$v.password.newPasswordConfirm.$dirty&&!s.$v.password.newPasswordConfirm.required?r("div",{staticClass:"error"},[s._v("Field is required")]):s.$v.password.newPasswordConfirm.$dirty&&!s.$v.password.newPasswordConfirm.sameAsPassword?r("div",{staticClass:"error"},[s._v("The passwords do not match.")]):s.backendError["newPasswordConfirm"]?r("div",{staticClass:"error"},[s._v(" "+s._s(s.backendError["newPasswordConfirm"])+" ")]):s._e()])],1),r("div",{staticClass:"btn",on:{click:s.changePassword}},[s._v(s._s(s.btnText))]),r("transition",{attrs:{name:"success"}},[s.successMessage?r("div",{staticClass:"success-flash"},[r("strong",[s._v("Success: ")]),s._v(" "+s._s(s.successMessage)+" ")]):s._e()])],1)]),r("div",{staticClass:"drawing-list--container"},[r("div",{staticClass:"module-title"},[r("div",[s._v("Drawings:")]),r("div",[s._v(s._s(s.drawingPosts.length)+"/15")])]),r("div",{staticClass:"drawing-post--container"},s._l(s.drawingPosts,(function(e,a){return r("div",{key:a,staticClass:"drawing-post"},[r("router-link",{attrs:{to:{name:"UserDrawingPost",params:{username:e.username,drawing:e,drawingID:e._id,liked:e.liked=s.likedPosts.includes(e._id)}}}},[r("div",{staticClass:"drawing-thumbnail"},[r("img",{attrs:{src:"/api/posts/profile/drawing/"+e.drawing_path,alt:""}})]),r("div",{staticClass:"drawing-info--container"},[r("div",{staticClass:"drawing-title"},[s._v(" Title: "+s._s(e.title)+" ")]),r("div",{staticClass:"drawing-description"},[s._v(" Description: "+s._s(e.description)+" ")])])])],1)})),0)])])]),r("router-view",{key:s.$route.path})],1)},t=[],n=(r("4d63"),r("ac1f"),r("25f0"),r("2909")),i=r("5530"),o=r("bc3a"),d=r.n(o),c=r("b5ae"),l=r("2f62"),w={name:"Profile",data:function(){return{user:{username:"",email:""},picFile:null,uploadErrorMessage:"",backendError:"",btnText:"Change Password",successMessage:"",password:{currentPassword:"",newPassword:"",newPasswordConfirm:""},drawingPosts:[],drawingError:"",profileInfo:"",likedPosts:[],editUsername:!1}},validations:{password:{currentPassword:{required:c["required"],strongPassword:function(s){return/[a-z]/.test(s)&&/[0-9]/.test(s)&&/\W|_/.test(s)&&s.length>=8},maxLength:Object(c["maxLength"])(100)},newPassword:{required:c["required"],strongPassword:function(s){return/[a-z]/.test(s)&&/[0-9]/.test(s)&&/\W|_/.test(s)&&s.length>=8},maxLength:Object(c["maxLength"])(100)},newPasswordConfirm:{required:c["required"],sameAsPassword:Object(c["sameAs"])("newPassword")}}},computed:Object(i["a"])({},Object(l["b"])(["getLoginState","getProfilePic","getUsername","profileStats"])),methods:{handlePicUpload:function(s){this.picFile=s.target.files[0]},submitFile:function(){var s=this,e=new FormData;e.append("file",this.picFile),d.a.post("/api/upload/profile-pic",e,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){s.$store.commit("SET_PROFILE_PIC",e.data)})).catch((function(e){s.uploadErrorMessage=e.response.data.error}))},changePassword:function(){var s=this;if(this.$v.password.$touch(),!this.$v.password.$invalid){this.loading=!0,this.btnText="Loading...";var e=this.password.currentPassword,r=this.password.newPassword,a=this.password.newPasswordConfirm;d.a.post("/api/auth/change-password",{currentPassword:e,newPassword:r,confirmNewPassword:a},{}).then((function(e){e.data&&(s.loading=!1,s.btnText="Change Password",s.successMessage=e.data.successPassword)})).catch((function(e){s.loading=!1,s.btnText="Change Password",s.backendError=e.response.data}))}},getDrawings:function(){var s=this;d.a.get("/api/profile/drawings").then((function(e){var r;s.drawingPosts=e.data.drawingPosts,(r=s.likedPosts).push.apply(r,Object(n["a"])(e.data.likedPosts))})).catch((function(e){s.drawingError=e.response.error}))},editUser:function(){this.editUsername=!0;var s=this.$refs.username;s.focus()},saveUsername:function(){var s=event.target.previousSibling;s=s.textContent,console.log(s);var e=new RegExp(/^[a-zA-Z0-9]+$/),r=e.test(s);s.length<6&&(r=!1),s.length>22&&(r=!1),console.log(r)}},mounted:function(){this.getDrawings()},watch:{picFile:function(){this.submitFile()},uploadErrorMessage:function(){var s=this;""!=this.uploadErrorMessage&&setTimeout((function(){return s.uploadErrorMessage=""}),3e3)},successMessage:function(){var s=this;""!=this.successMessage&&setTimeout((function(){return s.successMessage=""}),2e3)}}},u=w,p=(r("17b6"),r("2877")),v=Object(p["a"])(u,a,t,!1,null,"423b7106",null);e["default"]=v.exports}}]);
//# sourceMappingURL=chunk-033dab25.0e5188a2.js.map